<div class="rounded border shadow mx-2 mx-md-4 my-4 px-4 pb-4 pt-1">
  <div class="d-flex justify-content-end align-items-end mb-4 mb-sm-0">
    <button type="button" class="btn btn-link text-secondary text-decoration-none mx-1 p-0" data-bs-toggle="modal" data-bs-target="#countEditingModal_<%= count.id %>">
      <i class="fas fa-fw fa-edit"></i>
    </button>
  </div>

  <h4 class="my-0">
    <%= link_to count.name, count.movements_default_path, class: "text-dark text-decoration-none" %>
  </h4>

  <h6 class=""><%= count.description %></h6>
  <h6 class="my-0 text-secondary">
    <% if count.iban.present? %>
      <span id="count_<%= count.id %>_iban"><%= count.iban %></span>
      <i class="fas fa-copy"
         role="button"
         id="<%= count.id %>"
         onclick="((event) => { navigator.clipboard.writeText(document.querySelector(`#count_${event.target.id}_iban`).innerHTML?.trim()) })(event)"
      ></i>
    <% end %>
  </h6>
  <h6 class="my-0 text-secondary">Giacenza attuale: <%= to_visible_amount(count.current_amount) %>â‚¬</h6>
</div>

<!-- Modale per la cancellazione / modifica di un conto corrente -->
<div class="modal fade" id="countEditingModal_<%= count.id %>" tabindex="-1" aria-labelledby="countEditingModal_<%= count.id %>Label" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title fs-5" id="countEditingModal_<%= count.id %>Label">Modifica conto corrente</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="count_<%= count.id %>_error_messages"></div>

        <%= render "form", count: count %>


        <% if count.movements.blank? %>
          <div class="mt-5 mb-4 mx-2 mx-sm-4 d-flex justify-content-center justify-content-sm-end">
            <%= button_to 'Rimuovi conto corrente', count_path(count), method: :delete, class: "btn btn-danger" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
